# FeatureFlagを定義から削除まで安全に行うために考えたこと

- TVer内製化
- レビューやリリースの検証にボトルネック
- Feature Flagを導入
- flagd
- OpenFeature
- `_flag.NewFeatureIsEnabled()`
- よくある問題
  - トグルポイントとフラグ設定が残存
    - 現状運用でカバーする
  - フラグ設定の削除
    - トグルポイントより複雑
      - トグルポイントはコードから削除するだけ
      - リリースまで消せない。リリースしても、Revertの可能性があるうちは無理。
    - 自動化
      - フラグ設定から関数名を規則的に生成
      - deadcodeというツールで使用されていないコードを削除
      - 本番リリースは切り戻されないか
        - 一週間後に問題なければ削除すると決定
        - フラグ設定が変更されるPRでの検証CI
        - 自動実行して設定を削除するメンテナンスCI
- 今後の展望
  - トグルポイントの削除を手動から自動に
  - JSON設定を簡易化できないか
