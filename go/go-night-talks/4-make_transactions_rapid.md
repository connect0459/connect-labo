# Spanner Change Streamによる、Transactional Outboxでの分散トランザクションの高速化

- マイクロサービス
  - Pros
    - スケールさせやすい
    - 影響範囲をチーム単位で切りやすい
    - マルチテナントと相性が良い
  - Cons
    - サービス間の整合性
    - ランニングコスト
    - 一意なトランザクションの作成の難しさ
- Sagaパターン
  - 結果整合性が得られる
  - 補償トランザクションの設計
  - 外部に失敗要因がある場合は有用
- Transactional Outbox
  - 結果整合性が得られる
  - pollingを挟む
  - リトライがしやすい
- Saga vs Outbox
  - 失敗しうる処理かどうか
  - フローの傾向として、Outboxの方がフィットするパターンが多い
- Spanner Change Stream
  - DBやテーブルに対して、変更が発生したことを通知する仕組み
  - 採用結果：整合性チェックが5s->200msに。
